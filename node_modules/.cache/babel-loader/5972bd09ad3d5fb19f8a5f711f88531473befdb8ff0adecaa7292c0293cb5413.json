{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport { mapActions } from \"vuex\";\nimport UpdateComment from \"./UpdateComment.vue\";\nexport default {\n  name: \"CommentView\",\n  props: {\n    id: Number\n  },\n  components: {\n    UpdateComment\n  },\n  data() {\n    return {\n      showModal: false,\n      commentInput: false,\n      comment: [],\n      CommentId: 0,\n      newContent: \"\",\n      model: {\n        content: \"\"\n      }\n    };\n  },\n  methods: {\n    ...mapActions(\"post\", [\"getPost\"]),\n    ...mapActions(\"cate\", [\"getCat\"]),\n    postData() {\n      try {\n        axios.get(`http://localhost:8081/wp-json/wp/v2/comments?post=${this.id}`).then(res => this.comment = res.data);\n      } catch (error) {\n        if (error.status == 403 || error.status == 401) {\n          this.$router.push(\"/login\");\n        }\n      }\n    },\n    async ajouterCommentaire() {\n      try {\n        await axios.post(\"http://localhost:8081/wp-json/wp/v2/comments\", {\n          post: this.id,\n          content: this.model.content\n        }, {\n          headers: {\n            Authorization: \"Bearer \" + localStorage.getItem(\"wp\")\n          }\n        });\n        this.model.content = \"\";\n        this.postData();\n      } catch (error) {\n        if (error.status == 403 || error.status == 401) {\n          this.$router.push(\"/login\");\n        }\n      }\n    },\n    async modifierCommentaire(id) {\n      try {\n        await axios.post(`http://localhost:8081/wp-json/wp/v2/comments/${id}`, {\n          content: this.newContent\n        }, {\n          headers: {\n            Authorization: \"Bearer \" + localStorage.getItem(\"wp\")\n          }\n        });\n        this.commentInput = false;\n        this.postData();\n      } catch (error) {\n        if (error.status == 403 || error.status == 401) {\n          this.$router.push(\"/login\");\n        }\n      }\n    },\n    async AddPost() {\n      await axios.post(\"http://localhost:8081/wp-json/wp/v2/posts\", {\n        title: this.model.title,\n        content: this.model.description,\n        categories: this.id,\n        status: \"publish\"\n      }, {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"wp\")\n        }\n      }).then(res => {\n        console.log(res.data);\n        this.showModal = false;\n        this.model.title = \"\";\n        this.model.description = \"\";\n        this.$store.dispatch(\"post/getPost\");\n        this.$store.dispatch(\"cate/getCat\");\n      }).catch(error => {\n        if (error.status == 403 || error.status == 401) {\n          this.$router.push(\"/login\");\n        }\n      });\n    },\n    async supprimerCommentaire(id) {\n      if (confirm(\"Êtes-vous sûr de vouloir supprimer ce commentaire ?\")) {\n        try {\n          await axios.delete(`http://localhost:8081/wp-json/wp/v2/comments/${id}`, {\n            headers: {\n              Authorization: \"Bearer \" + localStorage.getItem(\"wp\")\n            }\n          });\n          this.postData();\n        } catch (error) {\n          if (error.status == 403 || error.status == 401) {\n            this.$router.push(\"/login\");\n          }\n        }\n      }\n    }\n  },\n  mounted() {\n    try {\n      axios.get(`http://localhost:8081/wp-json/wp/v2/comments?post=${this.id}`).then(res => this.comment = res.data);\n    } catch (error) {\n      if (error.status == 403 || error.status == 401) {\n        this.$router.push(\"/login\");\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","mapActions","UpdateComment","name","props","id","Number","components","data","showModal","commentInput","comment","CommentId","newContent","model","content","methods","postData","get","then","res","error","status","$router","push","ajouterCommentaire","post","headers","Authorization","localStorage","getItem","modifierCommentaire","AddPost","title","description","categories","console","log","$store","dispatch","catch","supprimerCommentaire","confirm","delete","mounted"],"sources":["/home/florentin/C-DEV-121-ABJ-1-2-twp-wilfried.konan/wello/src/components/CommentView.vue"],"sourcesContent":["<template>\n  <div v-for=\"comments in comment\" v-bind:key=\"comments.id\">\n    <div class=\"space-y-5\">\n      <div\n        class=\"mx-auto my-8 flex max-w-screen-sm rounded-xl border border-gray-100 p-4 text-left text-gray-600 shadow-lg sm:p-8\"\n      >\n        <img\n          class=\"mr-5 block h-8 w-8 max-w-full text-left align-middle sm:h-16 sm:w-16\"\n          src=\"/jObGDNw-_400x400.jpg\"\n          alt=\"Profile Picture\"\n        />\n        <div class=\"w-full text-left\">\n          <div\n            class=\"mb-2 flex flex-col justify-between text-gray-600 sm:flex-row\"\n          >\n            <h3 class=\"font-medium\">{{ comments.author_name }}</h3>\n            <time class=\"text-xs\" datetime=\"2022-11-13T20:00Z\">{{\n              comments.date.toString()\n            }}</time>\n          </div>\n          <p class=\"text-sm\">\n            {{ comments.content.rendered.replace(/<[^>]+>/g, \"\") }}\n          </p>\n          <div\n            class=\"mt-5 flex items-center justify-end text-gray-600 space-x-5\"\n            v-if=\"!commentInput\"\n          >\n            <button\n              class=\"text-red-500\"\n              @click=\"supprimerCommentaire(comments.id)\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke-width=\"1.5\"\n                stroke=\"currentColor\"\n                class=\"size-6\"\n              >\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  d=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n                />\n              </svg>\n            </button>\n            <button\n              class=\"text-black\"\n              @click=\"(commentInput = true), (CommentId = comments.id)\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke-width=\"1.5\"\n                stroke=\"currentColor\"\n                class=\"size-6\"\n              >\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  d=\"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10\"\n                />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"commentInput\">\n        <UpdateComment :id=\"comments.id\" />\n      </div>\n    </div>\n  </div>\n  <p class=\"font-bold\">COMMENTS</p>\n  <form\n    @submit.prevent=\"ajouterCommentaire\"\n    class=\"w-full relative flex justify-between gap-2\"\n  >\n    <input\n      type=\"text\"\n      class=\"w-full py-3 px-5 rounded-lg border border-gray-300 bg-white shadow-[0px_1px_2px_0px_rgba(16,_24,_40,_0.05)] focus:outline-none text-gray-900 placeholder-gray-400 text-lg font-normal leading-relaxed\"\n      placeholder=\"Write comments here....\"\n      v-model=\"model.content\"\n      required\n    />\n    <button type=\"submit\" class=\"absolute right-6 top-[18px]\">\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"20\"\n        height=\"20\"\n        viewBox=\"0 0 20 20\"\n        fill=\"none\"\n      >\n        <path\n          d=\"M11.3011 8.69906L8.17808 11.8221M8.62402 12.5909L8.79264 12.8821C10.3882 15.638 11.1859 17.016 12.2575 16.9068C13.3291 16.7977 13.8326 15.2871 14.8397 12.2661L16.2842 7.93238C17.2041 5.17273 17.6641 3.79291 16.9357 3.06455C16.2073 2.33619 14.8275 2.79613 12.0679 3.71601L7.73416 5.16058C4.71311 6.16759 3.20259 6.6711 3.09342 7.7427C2.98425 8.81431 4.36221 9.61207 7.11813 11.2076L7.40938 11.3762C7.79182 11.5976 7.98303 11.7083 8.13747 11.8628C8.29191 12.0172 8.40261 12.2084 8.62402 12.5909Z\"\n          stroke=\"#111827\"\n          stroke-width=\"1.6\"\n          stroke-linecap=\"round\"\n        />\n      </svg>\n    </button>\n  </form>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { mapActions } from \"vuex\";\nimport UpdateComment from \"./UpdateComment.vue\";\n\nexport default {\n  name: \"CommentView\",\n  props: {\n    id: Number,\n  },\n  components: {\n    UpdateComment,\n  },\n  data() {\n    return {\n      showModal: false,\n      commentInput: false,\n      comment: [],\n      CommentId: 0,\n      newContent: \"\",\n      model: {\n        content: \"\",\n      },\n    };\n  },\n  methods: {\n    ...mapActions(\"post\", [\"getPost\"]),\n    ...mapActions(\"cate\", [\"getCat\"]),\n    postData() {\n      try {\n        axios\n          .get(`http://localhost:8081/wp-json/wp/v2/comments?post=${this.id}`)\n          .then((res) => (this.comment = res.data));\n      } catch (error) {\n        if (error.status == 403 || error.status == 401) {\n          this.$router.push(\"/login\");\n        }\n      }\n    },\n    async ajouterCommentaire() {\n      try {\n        await axios.post(\n          \"http://localhost:8081/wp-json/wp/v2/comments\",\n          {\n            post: this.id,\n            content: this.model.content,\n          },\n          {\n            headers: {\n              Authorization: \"Bearer \" + localStorage.getItem(\"wp\"),\n            },\n          }\n        );\n        this.model.content = \"\";\n        this.postData();\n      } catch (error) {\n        if (error.status == 403 || error.status == 401) {\n          this.$router.push(\"/login\");\n        }\n      }\n    },\n    async modifierCommentaire(id) {\n      try {\n        await axios.post(\n          `http://localhost:8081/wp-json/wp/v2/comments/${id}`,\n          {\n            content: this.newContent,\n          },\n          {\n            headers: {\n              Authorization: \"Bearer \" + localStorage.getItem(\"wp\"),\n            },\n          }\n        );\n        this.commentInput = false;\n        this.postData();\n      } catch (error) {\n        if (error.status == 403 || error.status == 401) {\n          this.$router.push(\"/login\");\n        }\n      }\n    },\n    async AddPost() {\n      await axios\n        .post(\n          \"http://localhost:8081/wp-json/wp/v2/posts\",\n          {\n            title: this.model.title,\n            content: this.model.description,\n            categories: this.id,\n            status: \"publish\",\n          },\n          {\n            headers: {\n              Authorization: \"Bearer \" + localStorage.getItem(\"wp\"),\n            },\n          }\n        )\n        .then((res) => {\n          console.log(res.data);\n          this.showModal = false;\n          this.model.title = \"\";\n          this.model.description = \"\";\n          this.$store.dispatch(\"post/getPost\");\n          this.$store.dispatch(\"cate/getCat\");\n        })\n        .catch((error) => {\n          if (error.status == 403 || error.status == 401) {\n            this.$router.push(\"/login\");\n          }\n        });\n    },\n    async supprimerCommentaire(id) {\n      if (confirm(\"Êtes-vous sûr de vouloir supprimer ce commentaire ?\")) {\n        try {\n          await axios.delete(\n            `http://localhost:8081/wp-json/wp/v2/comments/${id}`,\n            {\n              headers: {\n                Authorization: \"Bearer \" + localStorage.getItem(\"wp\"),\n              },\n            }\n          );\n          this.postData();\n        } catch (error) {\n          if (error.status == 403 || error.status == 401) {\n            this.$router.push(\"/login\");\n          }\n        }\n      }\n    },\n  },\n  mounted() {\n    try {\n      axios\n        .get(`http://localhost:8081/wp-json/wp/v2/comments?post=${this.id}`)\n        .then((res) => (this.comment = res.data));\n    } catch (error) {\n      if (error.status == 403 || error.status == 401) {\n        this.$router.push(\"/login\");\n      }\n    }\n  },\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}